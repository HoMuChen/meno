# Meetings Collection Data Contract

## Firestore Collection: `meetings`

### Schema

```typescript
interface Meeting {
  id: string;          // Document ID (auto-generated by Firestore)
  userId: string;      // ID of the user who owns the meeting
  title: string;       // Meeting title
  description: string; // Meeting description
  content: string;     // Full meeting content/transcript (markdown format)
  summary?: string;    // AI-generated summary (optional)
  status: string;      // Meeting status: "in progress" | "completed" | "draft"
  fileUrl?: string;    // URL to audio file in Firebase Storage (optional)
  created_at: string;  // ISO 8601 timestamp string
}
```

### Field Details

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | string | Yes | Auto-generated document ID by Firestore |
| `userId` | string | Yes | Firebase Auth user ID of the meeting owner |
| `title` | string | Yes | Display title for the meeting |
| `description` | string | Yes | Brief description of the meeting |
| `content` | string | Yes | Full meeting transcript or notes in markdown format |
| `summary` | string | No | AI-generated summary of the meeting content |
| `status` | string | Yes | Current processing status of the meeting |
| `fileUrl` | string | No | Firebase Storage URL for associated audio file |
| `created_at` | string | Yes | Creation timestamp in ISO 8601 format |

### Status Values

- `"in progress"` - AI is currently processing the audio/content
- `"completed"` - Processing is complete
- `"init"` - Meeting created but not yet processed

### Indexes

- Primary index on `userId` field for user-scoped queries

### Query Patterns

1. **List user meetings**: Query by `userId`, sorted by `created_at` DESC
2. **Paginated listing**: Uses Firestore cursor pagination with `startAfter`
3. **Performance optimization**: List queries exclude `content` and `summary` fields

### Storage Integration

- Audio files referenced by `fileUrl` are stored in Firebase Storage
- Storage path pattern: `meetings/${filename}`

### Access Control

- All queries are scoped by `userId`
- Users can only access their own meetings
- Enforced via Firestore security rules
